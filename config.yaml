# Byonk Configuration
# Maps devices to screens and provides screen definitions

# Device Registration (enabled by default)
# New devices show a 10-character registration code on screen.
# Add the code (hyphenated format) to the 'devices' section below.
# Set enabled: false to allow any device to connect.
registration:
  enabled: true
  # screen: default  # Optional: custom screen for registration (default: uses default_screen)

# Authentication mode advertised to devices via /api/setup
# "api_key" (default) - devices send Access-Token header
# "ed25519" - devices use Ed25519 signature authentication
# Note: /api/display always accepts both methods regardless of this setting
auth_mode: api_key

# Panel profiles with measured display colors
# Each panel maps official (ideal) colors to measured (actual) colors.
# Dev mode uses measured colors to preview what the panel really shows.
# colors: official palette sent to device
# colors_actual: measured colors as they appear on the physical display
# match: exact match against firmware Board header for auto-detection
panels:
  trmnl_og:
    name: "TRMNL OG (4-grey)"
    match: "trmnl_og"
    width: 800
    height: 480
    colors: "#000000,#555555,#AAAAAA,#FFFFFF"
    colors_actual: "#383838,#6E6E6E,#9C9C9C,#B8B8B0"
  trmnl_og_4clr:
    name: "TRMNL OG (4-color)"
    match: "trmnl_og_4clr"
    width: 800
    height: 480
    colors: "#000000,#FFFFFF,#FF0000,#FFFF00"
    colors_actual: "#383038,#B8B8B0,#9C484B,#D0BE47"
  trmnl_x:
    name: "TRMNL X (16-grey)"
    match: "trmnl_x"
    width: 1872
    height: 1404
    colors: "#000000,#111111,#222222,#333333,#444444,#555555,#666666,#777777,#888888,#999999,#AAAAAA,#BBBBBB,#CCCCCC,#DDDDDD,#EEEEEE,#FFFFFF"
    colors_actual: "#383838,#434343,#4E4E4E,#595959,#646464,#6E6E6E,#787878,#828282,#8B8B8B,#949494,#9C9C9C,#A3A3A3,#AAAAAA,#B0B0B0,#B5B5B2,#B8B8B0"
  xteink_x4:
    name: "XTEink X4 (4-grey)"
    match: "xteink_x4"
    width: 800
    height: 480
    colors: "#000000,#555555,#AAAAAA,#FFFFFF"
    colors_actual: "#383838,#6E6E6E,#9C9C9C,#B8B8B0"
  waveshare:
    name: "Waveshare (4-grey)"
    match: "waveshare"
    width: 800
    height: 480
    colors: "#000000,#555555,#AAAAAA,#FFFFFF"
    colors_actual: "#383838,#6E6E6E,#9C9C9C,#B8B8B0"
  seeed_xiao_c3:
    name: "Seeed Xiao C3 (4-grey)"
    match: "seeed_xiao_c3"
    width: 296
    height: 128
    colors: "#000000,#555555,#AAAAAA,#FFFFFF"
    colors_actual: "#383838,#6E6E6E,#9C9C9C,#B8B8B0"
  seeed_xiao_s3:
    name: "Seeed Xiao S3 (4-grey)"
    match: "seeed_xiao_s3"
    width: 296
    height: 128
    colors: "#000000,#555555,#AAAAAA,#FFFFFF"
    colors_actual: "#383838,#6E6E6E,#9C9C9C,#B8B8B0"
  xiao_epaper:
    name: "Seeed Xiao ePaper (4-grey)"
    match: "xiao_epaper"
    width: 296
    height: 128
    colors: "#000000,#555555,#AAAAAA,#FFFFFF"
    colors_actual: "#383838,#6E6E6E,#9C9C9C,#B8B8B0"
  xiao_epaper_3clr:
    name: "Seeed Xiao 3-Color"
    match: "xiao_epaper_3clr"
    width: 296
    height: 128
    colors: "#000000,#FFFFFF,#FF0000"
    colors_actual: "#383038,#B8B8B0,#9C484B"
  reterminal_e1001:
    name: "reTerminal E1001 (4-grey)"
    match: "reterminal_e1001"
    width: 800
    height: 480
    colors: "#000000,#555555,#AAAAAA,#FFFFFF"
    colors_actual: "#000000,#2A2A2A,#676767,#FFFFFF"
  reterminal_e1002:
    name: "reTerminal E1002 (6-color)"
    match: "reterminal_e1002"
    width: 800
    height: 480
    colors: "#000000,#FFFFFF,#FF0000,#FFFF00,#0000FF,#00FF00"
    colors_actual: "#000000,#FFFFFF,#B50303,#FFEE00,#205497,#0D876B"
    dither:
      sierra-light:
        error_clamp: 0.11
        noise_scale: 5
        
screens:
  # Default screen - shows time and a message
  default:
    script: default.lua
    template: default.svg
    default_refresh: 300
    
  # Floerli room booking display
  floerli:
    script: floerli.lua
    template: floerli.svg
    default_refresh: 900

  # Public transport departures
  transit:
    script: transit.lua
    template: transit.svg
    default_refresh: 60

  # Gray level test
  graytest:
    script: graytest.lua
    template: graytest.svg
    default_refresh: 3600

  # Bitmap font demo (parameterized by font_prefix)
  fontdemo-bitmap:
    script: fontdemo-bitmap.lua
    template: fontdemo-bitmap.svg
    default_refresh: 3600

  # Hinting demo - comparing engines and targets
  hintdemo:
    script: hintdemo.lua
    template: hintdemo.svg
    default_refresh: 3600

  # Hello world tutorial screen
  hello:
    script: hello.lua
    template: hello.svg
    default_refresh: 60

  # CMYK gradient and palette calibrator
  calibrator:
    script: calibrator.lua
    template: calibrator.svg
    default_refresh: 3600

# Map devices to screens
# Use MAC address (e.g., "94:A9:90:8C:6D:18") or registration code (e.g., "ABCDE-FGHJK")
devices:
  # Example using registration code (read from device screen):
  # "ABCDE-FGHJK":
  #   screen: transit
  #   colors: "#000000,#FFFFFF,#FF0000"  # Optional: override display palette
  #   params:
  #     station: "Olten"
  #
  # Tobi's device - bus stop departures
  "B4:A9:90:8C:6D:18":
    screen: transit
    params:
      station: "Trans, Dorf"
      limit: 8
  "QHUTU-REZWE":
    panel: reterminal_e1001
    screen: gphoto
    dither: atkinson
    params:
      album_url: "https://photos.app.goo.gl/xS9tWGRShAzf3YCg6"
      show_status: false
      refresh_rate: 300

    # atkinson
 
  # Test device for transit (docs sample)
  "TR:AN:SI:T0:00:00":
    screen: transit
    params:
      station: "Trans, Dorf"
      limit: 8

  # Test device for gray levels
  "TE:ST:GR:AY:00:00":
    screen: graytest
    params: {}

  # Test devices for bitmap font demos
  "X11Helv":
    screen: fontdemo-bitmap
    params:
      font_prefix: "X11Helv"
  "X11LuSans":
    screen: fontdemo-bitmap
    params:
      font_prefix: "X11LuSans"
  "X11LuType":
    screen: fontdemo-bitmap
    params:
      font_prefix: "X11LuType"
  "X11Term":
    screen: fontdemo-bitmap
    params:
      font_prefix: "X11Term"
  "X11Misc":
    screen: fontdemo-bitmap
    params:
      font_prefix: "X11Misc"

  # Test device for hinting demo
  "HI:NT:DE:MO:00:00":
    screen: hintdemo
    params: {}

  # Test device for hello tutorial
  "TE:ST:HE:LL:00:00":
    screen: hello
    params: {}

  # Example: Device showing Floerli room "Rosa"
  # "AA:BB:CC:DD:EE:FF":
  #   screen: floerli
  #   params:
  #     room: "Rosa"

  # Example: Device showing transit departures
  # "BB:CC:DD:EE:FF:00":
  #   screen: transit
  #   params:
  #     station: "Olten, SÃ¼dwest"
  #     limit: 8
  "XXSFE-VAGTB":
    # screen: calibrator
    screen: gphoto
    # screen: default
    dither: floyd-steinberg
    # atkinson
    panel: reterminal_e1002
    params:
      album_url: "https://photos.app.goo.gl/xS9tWGRShAzf3YCg6"
      show_status: false
      refresh_rate: 300
      
# Default screen for devices not in the devices list
default_screen: default
